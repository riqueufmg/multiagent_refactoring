{
  "smell": "Insufficient Modularization",
  "package": "com.github.javaparser.printer.lexicalpreservation",
  "detections": [
    {
      "class": "Difference",
      "detection": true,
      "justification": "Very large and complex: LOC 788, WMC 189, NOM 46 and low cohesion (LCOM 0.065). Contains many responsibilities, inner classes and wide dependency surface â€” sign of a bloated abstraction that should be decomposed."
    },
    {
      "class": "LexicalPreservingPrinter",
      "detection": true,
      "justification": "Large size and mixed responsibilities: LOC 592, WMC 63, NOM 14 with many dependencies (observer, token management, formatting). It concentrates printing, observation and formatting logic that could be separated into smaller cohesive classes."
    },
    {
      "class": "LexicalDifferenceCalculator",
      "detection": true,
      "justification": "Substantial complexity and method count: LOC 328, WMC 71, NOM 17 and multiple nested/helper types. Its size and varied dependencies indicate multiple responsibilities that could be modularized."
    },
    {
      "class": "DifferenceElementCalculator",
      "detection": true,
      "justification": "Non-trivial size and complexity for a single calculator: LOC 253, WMC 52, NOM 11 and many interactions (text/child/token logic). Responsibilities for matching, positioning and extraction suggest further decomposition."
    },
    {
      "class": "NodeText",
      "detection": true,
      "justification": "High method count relative to size: NOM 24, LOC 124, WMC 32 and responsibilities spanning text matching and token handling. Multiple concerns (matching strategies, text production) could be separated to improve cohesion."
    },
    {
      "class": "PeekingIterator",
      "detection": false,
      "justification": "Although moderate in size (LOC 139, NOM 16, WMC 26), it represents a focused iterator utility with a single, cohesive responsibility (lookahead iteration). Its complexity is consistent with that role and does not by itself indicate insufficient modularization."
    }
  ]
}