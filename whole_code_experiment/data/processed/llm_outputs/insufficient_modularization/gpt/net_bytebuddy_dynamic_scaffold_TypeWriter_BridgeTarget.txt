{
    "smell": "Insufficient Modularization",
    "class": ["net.bytebuddy.dynamic.scaffold.TypeWriter.Default"],
    "detection": true,
    "justification": "The TypeWriter.Default implementation is extremely large and combines many distinct responsibilities that should be separated: it contains/defines field and method pool APIs (FieldPool, MethodPool, RecordComponentPool) plus many nested Record/Record.Record implementations; class/file dumping (ClassDumpAction and Dispatcher); validation (ValidatingClassVisitor and its Constraint hierarchy); creation, inlining, redefinition and decoration flows (ForCreation, ForInlining, WithFullProcessing, WithDecorationOnly) with numerous visitor classes (CreationClassVisitor, RedefinitionClassVisitor, DecorationClassVisitor, DeduplicatingClassVisitor, CodePreservingMethodVisitor, AttributeObtaining* visitors); implementation/context management (ContextRegistry, ImplementationContextClassVisitor, ImplementationContext.ExtractableView handling, InitializationHandler and many Appending/WithDrain/WithoutDrain variants); frame writing logic (FrameWriter and its implementations); and module patching (PatchingModuleVisitor). Constructors and factory methods accept very large parameter lists and the class exposes many internal concerns (type initialization, auxiliary types, annotation retention, ASM reader/writer flags, type pool, class file version, etc.). This concentration of responsibilities, many nested classes, and varied concerns (validation, bytecode writing, redefinition logic, dumping, frame management, module handling) indicate the abstraction was not adequately decomposed and would benefit from refactoring into smaller, cohesive components."
}